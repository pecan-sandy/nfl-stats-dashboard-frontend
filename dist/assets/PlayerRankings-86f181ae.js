import{g as m,l as K,R as e,h as Fe,L as Ee}from"./index-c17ab661.js";import"./Tooltip-aef3c65b.js";import{M as je,u as Se,P as Oe,a as Ie,b as Ve,L as De,m as le}from"./proxy-f335667e.js";import{R as pe,L as Ne,T as he,X as We,Y as He,a as ze,z as Ge}from"./generateCategoricalChart-c719c97c.js";import{R as we,P as ke,a as Ce,b as _e,c as se}from"./RadarChart-76623cc3.js";import{a as Ye,L as Qe}from"./LineChart-888e5b60.js";class Ue extends m.Component{getSnapshotBeforeUpdate(u){const a=this.props.childRef.current;if(a&&u.isPresent&&!this.props.isPresent){const d=a.offsetParent,f=d instanceof HTMLElement&&d.offsetWidth||0,c=this.props.sizeRef.current;c.height=a.offsetHeight||0,c.width=a.offsetWidth||0,c.top=a.offsetTop,c.left=a.offsetLeft,c.right=f-c.width-c.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Ke({children:n,isPresent:u,anchorX:a}){const d=m.useId(),f=m.useRef(null),c=m.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:N}=m.useContext(je);return m.useInsertionEffect(()=>{const{width:R,height:l,top:P,left:v,right:L}=c.current;if(u||!f.current||!R||!l)return;const A=a==="left"?`left: ${v}`:`right: ${L}`;f.current.dataset.motionPopId=d;const S=document.createElement("style");return N&&(S.nonce=N),document.head.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${d}"] {
            position: absolute !important;
            width: ${R}px !important;
            height: ${l}px !important;
            ${A}px !important;
            top: ${P}px !important;
          }
        `),()=>{document.head.removeChild(S)}},[u]),K.jsx(Ue,{isPresent:u,childRef:f,sizeRef:c,children:m.cloneElement(n,{ref:f})})}const qe=({children:n,initial:u,isPresent:a,onExitComplete:d,custom:f,presenceAffectsLayout:c,mode:N,anchorX:R})=>{const l=Se(Xe),P=m.useId();let v=!0,L=m.useMemo(()=>(v=!1,{id:P,initial:u,isPresent:a,custom:f,onExitComplete:A=>{l.set(A,!0);for(const S of l.values())if(!S)return;d&&d()},register:A=>(l.set(A,!1),()=>l.delete(A))}),[a,l,d]);return c&&v&&(L={...L}),m.useMemo(()=>{l.forEach((A,S)=>l.set(S,!1))},[a]),m.useEffect(()=>{!a&&!l.size&&d&&d()},[a]),N==="popLayout"&&(n=K.jsx(Ke,{isPresent:a,anchorX:R,children:n})),K.jsx(Oe.Provider,{value:L,children:n})};function Xe(){return new Map}const de=n=>n.key||"";function Pe(n){const u=[];return m.Children.forEach(n,a=>{m.isValidElement(a)&&u.push(a)}),u}const Ae=({children:n,custom:u,initial:a=!0,onExitComplete:d,presenceAffectsLayout:f=!0,mode:c="sync",propagate:N=!1,anchorX:R="left"})=>{const[l,P]=Ie(N),v=m.useMemo(()=>Pe(n),[n]),L=N&&!l?[]:v.map(de),A=m.useRef(!0),S=m.useRef(v),j=Se(()=>new Map),[ye,G]=m.useState(v),[V,oe]=m.useState(v);Ve(()=>{A.current=!1,S.current=v;for(let B=0;B<V.length;B++){const C=de(V[B]);L.includes(C)?j.delete(C):j.get(C)!==!0&&j.set(C,!1)}},[V,L.length,L.join("-")]);const q=[];if(v!==ye){let B=[...v];for(let C=0;C<V.length;C++){const O=V[C],Y=de(O);L.includes(Y)||(B.splice(C,0,O),q.push(O))}return c==="wait"&&q.length&&(B=q),oe(Pe(B)),G(v),null}const{forceRender:D}=m.useContext(De);return K.jsx(K.Fragment,{children:V.map(B=>{const C=de(B),O=N&&!l?!1:v===V||L.includes(C),Y=()=>{if(j.has(C))j.set(C,!0);else return;let X=!0;j.forEach(ge=>{ge||(X=!1)}),X&&(D==null||D(),oe(S.current),N&&(P==null||P()),d&&d())};return K.jsx(qe,{isPresent:O,initial:!A.current||a?void 0:!1,custom:u,presenceAffectsLayout:f,mode:c,onExitComplete:O?void 0:Y,anchorX:R,children:B},C)})})},Je={ARI:"#97233F",ATL:"#A71930",BAL:"#241773",BUF:"#00338D",CAR:"#0085CA",CHI:"#0B162A",CIN:"#FB4F14",CLE:"#311D00",DAL:"#003594",DEN:"#FB4F14",DET:"#0076B6",GB:"#203731",HOU:"#03202F",IND:"#002C5F",JAX:"#101820",KC:"#E31837",LV:"#000000",LAC:"#0080C6",LAR:"#003594",MIA:"#008E97",MIN:"#4F2683",NE:"#002244",NO:"#D3BC8D",NYG:"#0B2265",NYJ:"#125740",PHI:"#004C54",PIT:"#FFB612",SEA:"#002244",SF:"#AA0000",TB:"#D50A0A",TEN:"#0C2340",WAS:"#773141"},U={QB:{label:"Quarterbacks",metrics:[{key:"passing_yards",label:"Passing Yards",category:"Volume"},{key:"completion_percentage",label:"Completion %",category:"Efficiency"},{key:"qbr",label:"Total QBR",category:"Overall"},{key:"epa_per_play",label:"EPA/Play",category:"Advanced"},{key:"epa_per_att",label:"EPA/Attempt",category:"Advanced"},{key:"passing_tds",label:"Passing TDs",category:"Volume"},{key:"interceptions",label:"Interceptions",isNegative:!0,category:"Mistakes"}],advancedMetrics:[{key:"passer_rating",label:"Passer Rating",category:"Overall"},{key:"qbr",label:"QBR",category:"Overall"},{key:"cpoe",label:"CPOE",category:"Accuracy"},{key:"any_a",label:"ANY/A",category:"Efficiency"},{key:"epa_per_play",label:"EPA/Play",category:"Advanced"}],description:"Quarterback metrics focus on passing efficiency, decision-making, and overall contribution to team success."},RB:{label:"Running Backs",metrics:[{key:"rushing_yards",label:"Rushing Yards"},{key:"yards_per_carry",label:"Yds/Carry"},{key:"rushing_tds",label:"Rushing TDs"}],advancedMetrics:[{key:"rush_yards_oe_per_att",label:"Yards Over Expected/Att"},{key:"rush_pct_over_expected",label:"Rush % Over Expected"},{key:"percent_attempts_gte_eight_defenders",label:"% vs 8+ Defenders"}],description:"Running back metrics evaluate ball-carrying efficiency, ability to create beyond what's blocked, and contribution to the offensive success."},WR:{label:"Wide Receivers",metrics:[{key:"receiving_yards",label:"Receiving Yards"},{key:"receptions",label:"Receptions"},{key:"receiving_tds",label:"Receiving TDs"}],advancedMetrics:[{key:"yards_per_target",label:"Yards/Target"},{key:"racr",label:"RACR"},{key:"wopr",label:"WOPR"},{key:"yac_oe",label:"YAC Over Expected"},{key:"avg_separation",label:"Avg Separation"}],description:"Wide receiver metrics focus on receiving production, route running ability, and yards after catch contribution."},TE:{label:"Tight Ends",metrics:[{key:"receiving_tds",label:"Receiving TDs"}],advancedMetrics:[{key:"receiving_yards",label:"Receiving Yards"},{key:"receptions",label:"Receptions"},{key:"yards_per_target",label:"Yards/Target"},{key:"racr",label:"RACR"}],description:"Tight end metrics evaluate dual-threat capabilities as both blockers and receivers in the passing game."}},Re=["#8884d8","#82ca9d","#ffc658","#ff8042","#0088fe","#00C49F","#FFBB28","#FF8042","#8884d8","#82ca9d"],Ze=200,et=50,tt=(n,u=!1)=>{const a=u?100-n:n;return a>=90?{grade:"Elite",color:"text-green-400"}:a>=80?{grade:"Great",color:"text-green-300"}:a>=65?{grade:"Above Avg",color:"text-blue-400"}:a>=45?{grade:"Average",color:"text-gray-300"}:a>=30?{grade:"Below Avg",color:"text-yellow-300"}:a>=15?{grade:"Poor",color:"text-orange-400"}:{grade:"Very Poor",color:"text-red-400"}},Q=(n,u,a=!1)=>{const d=u.map(l=>parseFloat(l)).filter(l=>!isNaN(l));if(!d.length)return 0;const f=parseFloat(n);if(isNaN(f))return 0;const c=[...d].sort((l,P)=>l-P);let N=c.findIndex(l=>l>=n);N===-1&&(N=c.length);let R=Math.round(N/c.length*100);return N===0&&c.length>1&&(R=Math.round(1/c.length*100)),a?100-R:R},z=n=>n?["RB","FB","HB"].includes(n.toUpperCase())?"RB":U[n.toUpperCase()]?n.toUpperCase():null:null,at=(n,u=!1)=>{const a=u?100-n:n;return a>=90?"text-emerald-500 bg-emerald-900/50":a>=80?"text-emerald-400 bg-emerald-900/50":a>=70?"text-green-400 bg-green-900/50":a>=60?"text-lime-400 bg-lime-900/50":a>=50?"text-amber-300 bg-amber-900/50":a>=40?"text-amber-400 bg-amber-900/50":a>=30?"text-orange-400 bg-orange-900/50":a>=20?"text-orange-500 bg-orange-900/50":a>=10?"text-orange-600 bg-orange-900/50":"text-red-500 bg-red-900/50"},rt=(n,u=!1)=>{const a=u?100-n:n;return a>=90?"from-emerald-500 to-emerald-600":a>=80?"from-emerald-400 to-emerald-500":a>=70?"from-green-400 to-green-500":a>=60?"from-lime-400 to-lime-500":a>=50?"from-amber-300 to-amber-400":a>=40?"from-amber-400 to-amber-500":a>=30?"from-orange-400 to-orange-500":a>=20?"from-orange-500 to-orange-600":a>=10?"from-orange-600 to-orange-700":"from-red-500 to-red-600"},Le=(n,u="small")=>{if(!n)return null;const a=u==="large"?"w-24 h-24":"w-16 h-16",d={width:u==="large"?"6rem":"4rem",height:u==="large"?"6rem":"4rem"};return n.headshot_url?e.createElement("img",{src:n.headshot_url,alt:n.name,className:`${a} rounded-full object-cover`,style:d,onError:f=>{if(console.error(`Failed to load headshot for ${n.name}: ${n.headshot_url}`),f.target.onerror=null,n.gsis_id){const c=`https://static.www.nfl.com/image/private/t_player_profile_landscape/f_auto/league/yy4seib4h9fctzw3epvf/${n.gsis_id}`;console.log(`Trying NFL.com image: ${c}`),f.target.src=c}else f.target.src="https://via.placeholder.com/150?text=No+Image"}}):e.createElement("div",{className:`${a} rounded-full bg-gray-600 flex items-center justify-center`,style:d},e.createElement("span",{className:"text-gray-300"},n.name.split(" ").map(f=>f[0]).join("")))};class nt extends m.PureComponent{render(){const{cx:u,cy:a,payload:d}=this.props,f=(d==null?void 0:d.headshot)||"https://via.placeholder.com/40?text=N/A",c=30,N=`dot-pattern-${(d==null?void 0:d.id)||Math.random().toString(36).substring(7)}`,R=2,l=c*R,P=c*R,v=(c-l)/2,L=(c-P)/2,A=S=>{const j=document.getElementById(`${N}-img`);j&&j.setAttribute("href","https://via.placeholder.com/40?text=N/A"),console.warn(`Failed to load headshot for dot: ${d==null?void 0:d.fullName}`)};return e.createElement("g",null,e.createElement("defs",null,e.createElement("pattern",{id:N,patternUnits:"objectBoundingBox",width:"100%",height:"100%"},e.createElement("image",{id:`${N}-img`,href:f,x:v,y:L,width:l,height:P,onError:A}))),e.createElement("circle",{cx:u,cy:a,r:c/2,fill:`url(#${N})`}))}}function dt(){const[n,u]=m.useState([]),[a,d]=m.useState(!0),[f,c]=m.useState("stats"),[N,R]=m.useState(Object.fromEntries(Object.entries(U).map(([t,s])=>{var h,o;const i=t==="QB"?"epa_per_play":((h=s.metrics[0])==null?void 0:h.key)||((o=s.advancedMetrics[0])==null?void 0:o.key)||null;return[t,i]}))),[l,P]=m.useState([]),[v,L]=m.useState(null),[A,S]=m.useState(""),[j,ye]=m.useState("2024"),[G,V]=m.useState("QB"),[oe,q]=m.useState(new Set),D=m.useRef({});m.useEffect(()=>{Object.keys(U).forEach(t=>{D.current[t]||(D.current[t]=e.createRef())})},[]);const B=t=>{V(t)};if(m.useEffect(()=>{Fe.get("http://localhost:5000/api/players").then(t=>{Array.isArray(t.data)?u(t.data):(console.error("API did not return an array for players:",t.data),u([]))}).catch(t=>{console.error("Fetch players failed:",t),u([])}).finally(()=>d(!1))},[]),a)return e.createElement("div",{className:"p-6 flex flex-col items-center justify-center h-64"},e.createElement("div",{className:"w-16 h-16 border-t-4 border-blue-500 border-solid rounded-full animate-spin"}),e.createElement("p",{className:"mt-4 text-gray-400"},"Loading player rankings..."));const C=t=>{l.find(s=>s.gsis_id===t.gsis_id)?P(l.filter(s=>s.gsis_id!==t.gsis_id)):l.length<3&&P([...l,t])},O=t=>{const s=U[t];if(!s)return[];const i=s.metrics.map(o=>o.key),h=[...s.metrics];return s.advancedMetrics.forEach(o=>{i.includes(o.key)||h.push(o)}),h},Y=Object.entries(U).map(([t,s])=>{const i=N[t],h=O(t),o=h.find(r=>r.key===i),g=(o==null?void 0:o.isNegative)||!1;let b=n.filter(r=>{if(!(r.position===t)||t==="QB"&&!(r.passing_yards!=null&&parseInt(r.passing_yards)>1e3)||t==="RB"&&!(r.rushing_yards!=null&&parseInt(r.rushing_yards)>500)||t==="WR"&&!(r.receiving_yards!=null&&parseInt(r.receiving_yards)>500)||t==="TE"&&!(r.receiving_yards!=null&&parseInt(r.receiving_yards)>300))return!1;const E=r.snaps_played==null||r.snaps_played>=Ze,$=A===""||r.name.toLowerCase().includes(A.toLowerCase());return E&&$});t==="QB"&&["completion_percentage","qbr","epa_per_att"].includes(i)&&(b=b.filter(r=>r.passing_attempts==null||r.passing_attempts>=et));const w=n.filter(r=>r.position===t),y=w.map(r=>parseFloat(r[i])||0),M=y.length>0?y.reduce((r,k)=>r+k,0)/y.length:0,F=b.sort((r,k)=>{const E=r[i]||0,$=k[i]||0;return g?E-$:$-E});let W,ie=!1,J="";const Z=5;if(t==="QB"||t==="RB"||t==="WR"||t==="TE"){const r=F,k=r.slice(0,Z);W=v===t?r:k,ie=r.length>Z,J=v===t?"Show Top 5":`Show All ${r.length} Qualifying ${t}s`}const ee=F.slice(0,10),ce=ee.map((r,k)=>{const E=Q(parseFloat(r[i])||0,y,g);return{name:r.name.split(" ")[1]||r.name,fullName:r.name,value:+r[i]||0,headshot:r.headshot_url,rank:k+1,percentile:E,id:r.gsis_id}}),te=[],p=ee.slice(0,3);return h&&p.length>0&&h.forEach(r=>{const k={metric:r.label},E=r.isNegative||!1,$=F.map(x=>parseFloat(x[r.key])).filter(x=>x!==null&&!isNaN(x));p.forEach((x,H)=>{const ae=parseFloat(x[r.key]),ue=Q(ae,$,E);k[`player${H+1}`]=ue,k[`player${H+1}Name`]=x.name}),te.push(k)}),{pos:t,cfg:s,allMetrics:h,playersToDisplay:W,chartData:ce,metricKey:i,radarData:te,leagueAvg:M,isNegativeStat:g,showExpandButton:ie,expandButtonText:J,allValues:y,allPositionalPlayers:w}}),X=t=>{q(s=>{const i=new Set(s);return i.has(t)?i.delete(t):i.add(t),i})};return e.createElement("div",{className:"p-6 max-w-7xl mx-auto space-y-8 bg-gray-950"},e.createElement("div",{className:"flex flex-col space-y-6"},e.createElement("div",{className:"flex flex-col items-center text-center pb-6 border-b border-gray-800"},e.createElement("h1",{className:"text-4xl font-bold tracking-tight bg-gradient-to-r from-blue-500 to-indigo-600 bg-clip-text text-transparent"},"NFL Player Rankings"),e.createElement("p",{className:"text-lg text-gray-400 mt-2"},"Performance analysis for the ",j," season"),e.createElement("div",{className:"text-sm text-gray-500 mt-1 flex items-center"},e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})),e.createElement("span",null,"Players must meet minimum snap thresholds to qualify"))),e.createElement("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 bg-gray-900 rounded-xl p-4 shadow-lg"},e.createElement("div",{className:"relative w-full md:w-64"},e.createElement("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"}))),e.createElement("input",{type:"text",placeholder:"Search players...",value:A,onChange:t=>S(t.target.value),className:"pl-10 p-2 bg-gray-800 rounded-lg border border-gray-700 w-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Search players"})),e.createElement("div",{className:"flex gap-2"},e.createElement("button",{onClick:()=>c("stats"),className:`px-3 py-1 rounded-lg flex items-center ${f==="stats"?"bg-blue-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,"aria-pressed":f==="stats","aria-label":"View player stats"},e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})),"Stats View"),e.createElement("button",{onClick:()=>c("comparison"),className:`px-3 py-1 rounded-lg flex items-center ${f==="comparison"?"bg-blue-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,"aria-pressed":f==="comparison","aria-label":"Compare selected players"},e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})),"Compare (",l.length,"/3)"))),e.createElement("div",{className:"bg-gray-900 rounded-xl p-2 shadow-lg"},e.createElement("h2",{className:"text-sm uppercase tracking-wider font-medium text-gray-400 ml-3 mb-3"},"Position"),e.createElement("div",{className:"flex flex-wrap gap-2 px-2"},Object.entries(U).map(([t,s])=>e.createElement(le.button,{key:t,onClick:()=>B(t),className:`
                                    px-4 py-2.5 rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-blue-500
                                    transition-colors duration-200 flex-grow sm:flex-grow-0 w-full sm:w-auto
                                    ${G===t?"bg-blue-600 text-white shadow-md":"bg-gray-800 text-gray-300 hover:bg-gray-700"}
                                `,whileHover:{scale:1.03},whileTap:{scale:.97},"aria-pressed":G===t,"aria-label":`View ${s.label}`},e.createElement("div",{className:"flex items-center justify-center"},e.createElement("span",{className:"font-medium"},t))))))),f==="comparison"&&e.createElement("div",{className:"bg-gray-800 p-6 rounded-xl shadow-lg mb-8"},e.createElement("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4"},e.createElement("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-400 to-indigo-500 bg-clip-text text-transparent"},"Player Comparison"),l.length>0&&e.createElement("button",{onClick:()=>P([]),className:"mt-2 md:mt-0 px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded-md text-sm flex items-center","aria-label":"Clear all players"},e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})),"Clear All")),l.length===0?e.createElement("div",{className:"text-center py-12 bg-gray-900 rounded-lg"},e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-gray-600 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})),e.createElement("p",{className:"text-gray-400 text-lg mb-2"},"No players selected for comparison"),e.createElement("p",{className:"text-gray-500 max-w-lg mx-auto"},'Select up to 3 players to compare by clicking the "+" button on player cards. You can compare players across different positions.'),e.createElement("div",{className:"mt-6 flex flex-wrap justify-center gap-2"},e.createElement("div",{className:"text-sm font-medium text-gray-400 w-full mb-1"},"Try comparing top players:"),Y.filter(({pos:t})=>t===G).map(({playersToDisplay:t})=>t.slice(0,3).map(s=>e.createElement("button",{key:s.gsis_id,onClick:()=>C(s),className:"px-3 py-1.5 bg-gray-700 hover:bg-gray-600 rounded-full text-sm flex items-center"},e.createElement("span",null,s.name),e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"}))))))):e.createElement(e.Fragment,null,e.createElement("div",{className:"flex flex-wrap mb-6 gap-4 justify-center"},l.map(t=>e.createElement(le.div,{key:t.gsis_id,className:"flex flex-col items-center bg-gray-700 p-3 rounded-lg",whileHover:{y:-5}},Le(t,"large"),e.createElement("span",{className:"font-semibold mt-2 text-center"},t.name),e.createElement("div",{className:"flex items-center mt-1"},e.createElement("span",{className:"text-sm text-gray-400 mr-2"},t.position),e.createElement("span",{className:"text-xs px-2 py-0.5 bg-gray-800 rounded-full"},t.team)),e.createElement("button",{onClick:()=>C(t),className:"mt-2 px-2 py-1 text-xs bg-gray-600 hover:bg-gray-500 rounded text-red-300 flex items-center"},e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})),"Remove"))),l.length<3&&e.createElement("div",{className:"flex flex-col items-center justify-center bg-gray-700 p-3 rounded-lg w-24 h-24 border-2 border-dashed border-gray-600"},e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})),e.createElement("span",{className:"text-xs text-gray-500 mt-2 text-center"},"Add More Players"))),l.length>=2&&e.createElement(e.Fragment,null,e.createElement("div",{className:"bg-gray-900 rounded-lg p-4 mb-6"},e.createElement("h3",{className:"text-lg font-semibold mb-2"},"Performance Profile Comparison"),e.createElement("p",{className:"text-sm text-gray-400 mb-4"},"Radar visualization shows relative performance percentiles across key metrics"),e.createElement("div",{className:"w-full h-96"},e.createElement(pe,{width:"100%",height:"100%"},e.createElement(we,{outerRadius:120,width:730,height:350,data:ge(),margin:{top:10,right:30,bottom:30,left:30}},e.createElement(ke,null),e.createElement(Ce,{dataKey:"metric",tick:{fill:"white",fontSize:12}}),e.createElement(_e,{angle:30,domain:[0,100],tick:{fill:"white"}}),e.createElement(se,{name:"League Average",dataKey:"leagueAvg",stroke:"#718096",fill:"#718096",fillOpacity:.1,strokeDasharray:"3 3"}),l.map((t,s)=>e.createElement(se,{key:t.gsis_id,name:t.name,dataKey:`player${s+1}`,stroke:Re[s],fill:Re[s],fillOpacity:.5})),e.createElement(Ne,{wrapperStyle:{paddingTop:20}}),e.createElement(he,{content:({active:t,payload:s})=>{if(t&&s&&s.length){const i=s[0].payload;return e.createElement("div",{className:"bg-gray-800 p-3 rounded border border-gray-700 shadow-lg"},e.createElement("p",{className:"font-semibold"},i.metric),e.createElement("div",{className:"mt-2 space-y-1"},s.map((h,o)=>e.createElement("div",{key:`item-${o}`,className:"flex items-center"},e.createElement("div",{className:"w-3 h-3 mr-2",style:{backgroundColor:h.color}}),e.createElement("span",{className:"text-sm"},h.name,": ",h.value,"%")))))}return null}}))))),e.createElement("div",{className:"bg-gray-900 rounded-lg p-4"},e.createElement("h3",{className:"text-lg font-semibold mb-2"},"Detailed Metrics Comparison"),e.createElement("p",{className:"text-sm text-gray-400 mb-4"},"Side-by-side comparison of key metrics with league context"),e.createElement("div",{className:"overflow-x-auto"},e.createElement("table",{className:"w-full text-sm"},e.createElement("thead",{className:"bg-gray-800"},e.createElement("tr",null,e.createElement("th",{className:"px-4 py-2 text-left"},"Metric"),e.createElement("th",{className:"px-4 py-2 text-center"},"League Avg"),l.map(t=>e.createElement("th",{key:t.gsis_id,className:"px-4 py-2 text-center"},t.name.split(" ")[1]||t.name)))),e.createElement("tbody",{className:"divide-y divide-gray-800"},Me().map((t,s)=>{var i;return e.createElement("tr",{key:s,className:s%2===0?"bg-gray-850":"bg-gray-900"},e.createElement("td",{className:"px-4 py-2 font-medium"},t.metricLabel),e.createElement("td",{className:"px-4 py-2 text-center text-gray-400"},((i=t.leagueAvg)==null?void 0:i.toFixed(2))||"-"),l.map((h,o)=>{const g=t[`player${o+1}Value`],b=t[`player${o+1}Percentile`],w=g>t.leagueAvg,y=["interceptions","passing_yards","passing_tds","rushing_yards","rushing_tds","receiving_yards","receiving_tds","receptions"].includes(t.metric);return e.createElement("td",{key:h.gsis_id,className:"px-4 py-2 text-center"},e.createElement("div",{className:"flex flex-col items-center"},e.createElement("span",{className:w?"text-green-400":"text-red-400"},g!=null?y?parseInt(g):g.toFixed(2):"-"),b!==void 0&&e.createElement("div",{className:"w-full bg-gray-700 h-1 mt-1 rounded-full overflow-hidden"},e.createElement("div",{className:`h-1 ${b>=80?"bg-green-500":b>=60?"bg-blue-500":b>=40?"bg-gray-500":b>=20?"bg-orange-500":"bg-red-500"}`,style:{width:`${b}%`}}))))}))})))))))),f==="stats"&&Y.filter(({pos:t})=>t===G).map(({pos:t,cfg:s,allMetrics:i,playersToDisplay:h,chartData:o,metricKey:g,radarData:b,leagueAvg:w,isNegativeStat:y,showExpandButton:M,expandButtonText:F,allValues:W,allPositionalPlayers:ie})=>{var J,Z,ee,ce,te;return e.createElement("section",{key:t,ref:D.current[t],id:`position-${t}`,className:`bg-gray-900 rounded-lg p-6 shadow-lg transition-all duration-300 ${v===t?"ring-2 ring-blue-500":""}`},e.createElement("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-2 mb-4"},e.createElement("div",null,e.createElement("h2",{className:"text-2xl font-bold"},s.label),v===t&&e.createElement("p",{className:"text-sm text-gray-400 mt-1"},s.description)),e.createElement("div",{className:"flex flex-wrap gap-2"},e.createElement("select",{value:N[t],onChange:p=>{R(r=>({...r,[t]:p.target.value}))},className:"p-2 bg-gray-800 text-white rounded shadow border border-gray-700"},i.map(p=>e.createElement("option",{key:p.key,value:p.key},p.label))),M&&e.createElement("button",{onClick:()=>L(v===t?null:t),className:"bg-gray-700 px-3 py-2 rounded text-sm hover:bg-gray-600 transition"},F))),e.createElement("div",{className:"w-full h-80 mb-6"},e.createElement(pe,null,e.createElement(Ye,{data:o,margin:{top:30,right:30,bottom:70,left:30}},e.createElement(We,{dataKey:"fullName",angle:-45,textAnchor:"end",height:70,tick:{fill:"#fff",fontSize:12},interval:0}),e.createElement(He,{tick:{fill:"#fff"},domain:["auto","auto"]}),e.createElement(ze,{y:w,stroke:"#718096",strokeDasharray:"3 3",label:{value:"League Avg",position:"right",fill:"#718096",fontSize:12}}),e.createElement(Ge,{y1:y?0:w*1.3,y2:y?w*.7:"auto",fill:"#2d3748",fillOpacity:.2,label:{value:"Elite Zone",position:"insideTopRight",fill:"#68d391",fontSize:12}}),e.createElement(he,{content:({active:p,payload:r})=>{var k;if(p&&r&&r.length){const E=r[0].payload,{grade:$,color:x}=tt(E.percentile,y),H=((k=i.find(ae=>ae.key===g))==null?void 0:k.label)||g;return e.createElement("div",{className:"bg-gray-800 p-3 rounded border border-gray-700 shadow-lg"},e.createElement("p",{className:"font-bold text-lg"},E.fullName),e.createElement("p",{className:"mt-1"},`${H}: ${E.value}`),e.createElement("div",{className:"flex justify-between items-center mt-2"},e.createElement("span",{className:"text-sm"},"Rank: #",E.rank),e.createElement("span",{className:`text-sm font-bold ${x}`},$," (",E.percentile,"%)")),e.createElement("div",{className:"mt-2 w-full bg-gray-700 rounded-full h-1.5"},e.createElement("div",{className:"bg-blue-500 h-1.5 rounded-full",style:{width:`${E.percentile}%`}})))}return null}}),e.createElement(Qe,{type:"monotone",dataKey:"value",stroke:Je[t]||"#8884d8",strokeWidth:2,activeDot:{r:8},dot:e.createElement(nt,null)})))),v===t&&b.length>0&&e.createElement("div",{className:"w-full h-96 mb-6"},e.createElement("h3",{className:"text-xl font-semibold mb-4"},"Top 3 Players Comparison"),e.createElement(pe,{width:"100%",height:"100%"},e.createElement(we,{outerRadius:120,width:730,height:350,data:b,margin:{top:10,right:30,bottom:30,left:30}},e.createElement(ke,null),e.createElement(Ce,{dataKey:"metric",tick:{fill:"white"}}),e.createElement(_e,{angle:30,domain:[0,100],tick:{fill:"white"}}),e.createElement(se,{name:(J=b[0])==null?void 0:J.player1Name,dataKey:"player1",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.5}),((Z=b[0])==null?void 0:Z.player2Name)&&e.createElement(se,{name:(ee=b[0])==null?void 0:ee.player2Name,dataKey:"player2",stroke:"#82ca9d",fill:"#82ca9d",fillOpacity:.5}),((ce=b[0])==null?void 0:ce.player3Name)&&e.createElement(se,{name:(te=b[0])==null?void 0:te.player3Name,dataKey:"player3",stroke:"#ffc658",fill:"#ffc658",fillOpacity:.5}),e.createElement(Ne,{wrapperStyle:{paddingTop:20}}),e.createElement(he,null)))),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},e.createElement(Ae,null,h.map((p,r)=>{var xe,ve;const k=p.gsis_id,E=oe.has(k),$=parseFloat(p[g])||0,x=Q($,W,y),H=y,ae=at(x,H),ue=rt(x,H),$e=z(p.position),re=l.some(T=>T.gsis_id===p.gsis_id),be=((xe=i.find(T=>T.key===g))==null?void 0:xe.label)||g;return e.createElement(le.div,{key:p.gsis_id,layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"h-full"},e.createElement(le.div,{className:`h-full bg-gray-800 rounded-xl shadow-lg transition-all duration-300 
                                                ${re?"ring-2 ring-blue-500":"border border-gray-700"}
                                                ${E?"scale-102 shadow-xl z-10":"hover:shadow-xl"}`,whileHover:{y:-5},initial:!1,animate:{height:"auto",transition:{duration:.3}}},e.createElement("div",{className:"p-4 cursor-pointer",onClick:()=>X(k)},e.createElement("div",{className:"flex items-start"},e.createElement("div",{className:"mr-4 flex-shrink-0"},Le(p)),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement(Ee,{to:`/player/${p.gsis_id}`,className:"block",onClick:T=>T.stopPropagation()}," ",e.createElement("h4",{className:"text-base font-semibold truncate hover:text-blue-400 transition",title:p.name},p.name)),e.createElement("div",{className:"flex items-center text-sm text-gray-400 mt-0.5"},e.createElement("span",null,p.position),e.createElement("span",{className:"mx-1"},"•"),e.createElement("span",null,p.team))),e.createElement("div",{className:"flex-shrink-0 ml-2 space-x-1"},e.createElement("button",{onClick:T=>{T.stopPropagation(),C(p)},className:`p-1.5 rounded-full transition ${re?"bg-blue-600 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,title:re?"Remove from comparison":"Add to comparison","aria-label":re?"Remove from comparison":"Add to comparison"},e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},re?e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}):e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"}))),e.createElement("button",{onClick:T=>{T.stopPropagation(),X(k)},className:"p-1.5 rounded-full bg-gray-700 hover:bg-gray-600 text-gray-300",title:E?"Show less":"Show more","aria-label":E?"Show less":"Show more","aria-expanded":E},e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 transition-transform",style:{transform:E?"rotate(180deg)":"rotate(0)"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"}))))),$e&&e.createElement("div",{className:"mt-3"},e.createElement("div",{className:"flex justify-between items-center text-sm mb-1"},e.createElement("span",{className:"text-gray-400 font-medium"},be),e.createElement("span",{className:`font-semibold px-1.5 py-0.5 rounded text-xs ${ae}`},x,"th")),e.createElement("p",{className:"text-2xl font-bold text-gray-100 mb-2"},$!=null?["interceptions","passing_yards","passing_tds","rushing_yards","rushing_tds","receiving_yards","receiving_tds","receptions"].includes(g)?parseInt($):$.toFixed(((ve=i.find(T=>T.key===g))==null?void 0:ve.precision)??2):"N/A"),e.createElement("div",{className:"h-3 w-full bg-gray-700 rounded overflow-hidden border border-gray-600/50",title:`${x}th Percentile`},e.createElement("div",{className:`h-full rounded bg-gradient-to-r ${ue} transition-all duration-300 ease-out`,style:{width:`${x}%`}})))),e.createElement(Ae,null,E&&e.createElement(le.div,{className:"px-4 pb-4",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3}},e.createElement("div",{className:"mb-3"},e.createElement("h5",{className:"text-sm font-medium text-gray-300 mb-2"},"Performance Overview"),e.createElement("div",{className:"grid grid-cols-2 gap-2"},(()=>{const T=i.slice(0,8).filter(I=>I.key!==g),me={};return T.forEach(I=>{const ne=I.category||"Other";me[ne]||(me[ne]=[]);const _=p[I.key];if(_==null)return;const Te=ie.map(fe=>parseFloat(fe[I.key])||0).filter(fe=>!isNaN(fe)),Be=Q(parseFloat(_),Te,I.isNegative||!1);me[ne].push({...I,value:_,percentile:Be})}),Object.entries(me).map(([I,ne])=>e.createElement(e.Fragment,{key:I},ne.map(_=>e.createElement("div",{key:_.key,className:"bg-gray-800 p-2 rounded border border-gray-700 hover:border-gray-500 transition"},e.createElement("div",{className:"flex justify-between items-center"},e.createElement("div",{className:"flex flex-col"},e.createElement("span",{className:"text-xs text-gray-400"},_.label),e.createElement("span",{className:"text-base font-medium"},_.value)),e.createElement("div",{className:"flex flex-col items-end"},e.createElement("span",{className:"text-xs text-gray-400"},I),e.createElement("span",{className:"text-xs font-medium px-1.5 py-0.5 rounded mt-1",style:{backgroundColor:_.percentile>=80?"rgba(74, 222, 128, 0.2)":_.percentile>=60?"rgba(163, 230, 53, 0.2)":_.percentile>=40?"rgba(250, 204, 21, 0.2)":_.percentile>=20?"rgba(251, 146, 60, 0.2)":"rgba(239, 68, 68, 0.2)",color:_.percentile>=80?"#4ade80":_.percentile>=60?"#a3e635":_.percentile>=40?"#facc15":_.percentile>=20?"#fb923c":"#ef4444"}},_.percentile,"%")))))))})())),e.createElement("div",{className:"bg-gray-700 p-3 rounded-lg mt-3"},e.createElement("h5",{className:"text-sm font-medium text-gray-300 mb-1"},"Analysis Summary"),e.createElement("p",{className:"text-sm text-gray-300"},p.name.split(" ")[0]," is performing at",x>=80?" an elite level":x>=60?" an above average level":x>=40?" an average level":x>=20?" a below average level":" a poor level","compared to other ",p.position,"s in ",be.toLowerCase(),".",x>=60?" Consider this player a strong contributor.":x<=30?" This player is underperforming expectations.":" This player is performing close to league average.")),e.createElement(Ee,{to:`/player/${p.gsis_id}`,className:"w-full mt-3 flex items-center justify-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded transition"},e.createElement("span",null,"View Full Profile"),e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",viewBox:"0 0 20 20",fill:"currentColor"},e.createElement("path",{fillRule:"evenodd",d:"M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z",clipRule:"evenodd"})))))))}))))}));function ge(){if(l.length<2)return[];const t=z(l[0].position),s=l.every(o=>z(o.position)===t);let i=[],h=[];return s&&t?(i=O(t),h=n.filter(o=>z(o.position)===t)):(i=[{key:"epa_per_play",label:"EPA/Play",isNegative:!1},{key:"snaps_played",label:"Snaps Played",isNegative:!1}],h=n),i.length?i.map(o=>{const g={metric:o.label,leagueAvg:50},b=o.isNegative||!1,w=h.map(y=>parseFloat(y[o.key])).filter(y=>y!==null&&!isNaN(y));return l.forEach((y,M)=>{const F=parseFloat(y[o.key]);if(g[`player${M+1}Value`]=isNaN(F)?null:F,isNaN(F))g[`player${M+1}`]=0;else{const W=Q(F,w,b);g[`player${M+1}`]=W,g[`player${M+1}Percentile`]=W,g[`player${M+1}Name`]=y.name}}),g}):[]}function Me(){if(l.length<1)return[];const t=z(l[0].position),s=l.every(o=>z(o.position)===t);let i=[],h=[];return s&&t?(i=O(t),h=n.filter(o=>z(o.position)===t)):(i=[{key:"epa_per_play",label:"EPA/Play"},{key:"snaps_played",label:"Snaps Played"}],h=n),i.map(o=>{const g={metric:o.key,metricLabel:o.label,isNegative:o.isNegative||!1},b=h.map(w=>parseFloat(w[o.key])).filter(w=>w!==null&&!isNaN(w));return g.leagueAvg=b.length?b.reduce((w,y)=>w+y,0)/b.length:null,l.forEach((w,y)=>{const M=parseFloat(w[o.key]);if(g[`player${y+1}Value`]=isNaN(M)?null:M,!isNaN(M)){const F=Q(M,b,o.isNegative);g[`player${y+1}Percentile`]=F}}),g.leagueAvg=g.leagueAvg?50:0,g})}}export{dt as default};
